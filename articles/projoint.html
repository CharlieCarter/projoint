<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to get started with the basics of projoint
">
<title>Introduction to projoint • projoint</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to projoint">
<meta property="og:description" content="Learn how to get started with the basics of projoint
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">projoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/projoint.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to projoint</h1>
            
      
      
      <div class="d-none name"><code>projoint.Rmd</code></div>
    </div>

    
    
<p>Projoint is a complete pipeline for conjoint survey design,
implementation, analysis, and visualization. This R library conducts the
data wrangling, measurement error correction, and statistical analysis
components. Most users will only encounter two main functions –
<code><a href="../reference/reshape_projoint.html">reshape_projoint()</a></code> and <code><a href="../reference/projoint.html">projoint()</a></code> – while more
advanced users will have a high degree of control over the mechanics of
their estimation.</p>
<p>The <code><a href="../reference/projoint.html">projoint()</a></code> function takes a number of inputs: 1. an
argument specifying the data 2. an argument set specifying the
measurement error correction method 3. an argument indicating the
standard error estimation method 4. optional arguments specifying the
structure of the analysis and quantities of interest</p>
<p>As well, there are arguments allowing users to step through these
analysis decisions more slowly. We include a function to read the
results of a conjoint survey from a Qualtrics csv, a function to
estimate measurement error, functions to restructure conjoint data
according to specific quantities of interest, and several visualization
functions to produce publication-ready plots.</p>
<p>To start, let’s use <code><a href="../reference/read_Qualtrics.html">read_Qualtrics()</a></code> to load in a data
set. We’ll use an example data set that replicates a study by <a href="https://doi.org/10.1086/687569" class="external-link">Mummolo and Nall (2017)</a>
examining residential segregation in the United States. We replicate
this study exactly, except for adding in an extra question we can use to
estimate measurement error.</p>
<p>When you download a file from Qualtrics, please make sure to “use
choice text” (for more instructions by Qualtrics, see <a href="https://www.qualtrics.com/support/survey-platform/data-and-analysis-module/data/download-data/export-options/" class="external-link">Data
Export Options</a>). Please note that the original Qualtrics file has
three rows to describe variables. Thus, it should look like the
following:</p>
<p><img src="../reference/figures/screenshot_excel.png" id="id" class="class" style="width:100.0%;height:100.0%"></p>
<p>The <code><a href="../reference/read_Qualtrics.html">read_Qualtrics()</a></code> function uses the first row as the
column names and skip the second and third rows.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yhoriuchi.github.io/projoint/">projoint</a></span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_Qualtrics.html">read_Qualtrics</a></span><span class="op">(</span><span class="st">"data/mummolo_nall_replication.csv"</span><span class="op">)</span></span></code></pre></div>
<p>After reading the Qualtrics data into R, you perhaps need to add a
few more lines to clean your data – e.g., removing incomplete responses,
filtering out respondents who failed to pass the attention check
questions, some responses that Qualtrics flagged as possible bots, etc.
Then, your data frame (more specifically, tibble) should look like the
following. Each row corresponds to each respondent.</p>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 398 × 185</span></span></span>
<span><span class="co">##    ResponseId     choice1_repeated_fli…¹ choice1 choice2 choice3 choice4 choice5</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> R_yjYj0jtOY98… Community B            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> R_1dKd05O6FTO… Community B            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> R_1otDp642wWY… Community A            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> R_2BnD3fuJMRK… Community A            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> R_1cZo7yXoxo7… Community A            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> R_2zo0OJ1CnBF… Community B            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> R_9Zglxj22RFH… Community A            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> R_NUBwH4ZBNCS… Community B            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> R_1KiHr7ZV4cI… Community B            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> R_2b2vVVm1bwn… Community A            Commun… Commun… Commun… Commun… Commun…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 388 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ abbreviated name: ¹​choice1_repeated_flipped</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 178 more variables: choice6 &lt;chr&gt;, choice7 &lt;chr&gt;, choice8 &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   race &lt;chr&gt;, party_1 &lt;chr&gt;, party_2 &lt;chr&gt;, party_3 &lt;chr&gt;, party_4 &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ideology &lt;chr&gt;, honesty &lt;chr&gt;, `K-1-1` &lt;chr&gt;, `K-1-1-1` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `K-1-2` &lt;chr&gt;, `K-1-1-2` &lt;chr&gt;, `K-1-3` &lt;chr&gt;, `K-1-1-3` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `K-1-4` &lt;chr&gt;, `K-1-1-4` &lt;chr&gt;, `K-1-5` &lt;chr&gt;, `K-1-1-5` &lt;chr&gt;, …</span></span></span></code></pre>
<p>Next, we will use <code><a href="../reference/reshape_projoint.html">reshape_projoint()</a></code> to prepare the data
set for the main function. This involves stripping unnecessary columns,
indicating which column (if any) is a repeated task, and specifying the
respondent identifier.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reshaped_data</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span></span>
<span>  .dataframe <span class="op">=</span> <span class="va">dat</span>, </span>
<span>  .outcomes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>, <span class="st">"choice1_repeated_flipped"</span><span class="op">)</span>,</span>
<span>  .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>  .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>  .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>  .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .flipped <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Let’s walk through the arguments we have specified.
<code>.dataframe</code> is a data frame, ideally read in from Qualtrics
using <code><a href="../reference/read_Qualtrics.html">read_Qualtrics()</a></code> but not necessarily. The
<code>.idvar</code> argument, a character, indicates that in
<code>exampleData1</code>, the column <code>ResponseId</code> indicates
unique survey respondents. The <code>.outcomes</code> variable lists all
the columns that are outcomes; the last element in this vector is the
repeated task (if it was conducted). <code>.outcomes_ids</code>
indicates the possible options for an outcome; specifically, it is a
vector of characters with two elements, which are the last characters of
the names of the first and second profiles. For example, it should be
c(“A”, “B”) if the profile names are “Candidate A” and “Candidate B”.
This character vector can be anything, such as c(“1”, “2”), c(“a”, “b”),
etc. <em>If you have multiple tasks in your design, you should use the
same profile names across all these tasks</em>. <code>.alphabet</code>
defaults to “K” if the conjoint survey was conducted using either our
tool or Strezhnev’s <a href="https://github.com/astrezhnev/conjointsdt" class="external-link">Conjoint Survey Design
Tool</a>. The final two arguments, <code>.repeated</code> and
<code>.flipped</code>, again relate to the repeated task. If the
<code>.repeated</code> is set to <code>TRUE</code>, then the last
element of the <code>.outcomes</code> vector is taken to be a repetition
of the first task; <code>.flipped</code> indicates whether the profiles
are in the reversed order.</p>
<p>We can pass this data set directly into <code><a href="../reference/projoint.html">projoint()</a></code> as
follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span><span class="va">reshaped_data</span><span class="op">)</span></span></code></pre></div>
<p>To see the key components of the estimate, use
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: 0.1713053 </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<p>To see the summary of the estimated results, use
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 48 × 6</span></span></span>
<span><span class="co">##    estimand       estimate     se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> mm_uncorrected    0.573 0.013<span style="text-decoration: underline;">5</span>    0.547     0.599 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> mm_corrected      0.611 0.020<span style="text-decoration: underline;">6</span>    0.571     0.652 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> mm_uncorrected    0.486 0.013<span style="text-decoration: underline;">4</span>    0.460     0.513 att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> mm_corrected      0.479 0.020<span style="text-decoration: underline;">4</span>    0.439     0.519 att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> mm_uncorrected    0.444 0.013<span style="text-decoration: underline;">1</span>    0.419     0.470 att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> mm_corrected      0.415 0.020<span style="text-decoration: underline;">3</span>    0.376     0.455 att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> mm_uncorrected    0.488 0.013<span style="text-decoration: underline;">3</span>    0.462     0.514 att2:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> mm_corrected      0.482 0.020<span style="text-decoration: underline;">2</span>    0.443     0.522 att2:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> mm_uncorrected    0.524 0.013<span style="text-decoration: underline;">1</span>    0.498     0.550 att2:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> mm_corrected      0.536 0.020<span style="text-decoration: underline;">0</span>    0.497     0.576 att2:level2     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> returns a tibble (the tidyverse version of
data frame). So researchers can save and use it to make tables and
figures. For those who want to skip this manual step and plot the
estimates, use <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, but please note that the current
version only shows the figure for profile-level MMs or AMCEs.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></code></pre></div>
<p><img src="projoint_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Yusaku Horiuchi, Aaron Kaufman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
