<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="How to read and reshape data for conjoint analysis
">
<title>02. Read and wrangle your data for conjoint analysis • projoint</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="02. Read and wrangle your data for conjoint analysis">
<meta property="og:description" content="How to read and reshape data for conjoint analysis
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">projoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/projoint.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01-setup.html">01. Setting up your Qualtrics survey</a>
    <a class="dropdown-item" href="../articles/02-wrangle.html">02. Read and wrangle your data for conjoint analysis</a>
    <a class="dropdown-item" href="../articles/03-predict.html">03. Predict the intra-respondent reliability (IRR)</a>
    <a class="dropdown-item" href="../articles/04-estimate.html">04. Estimate corrected MMs or AMCEs</a>
    <a class="dropdown-item" href="../articles/05-visualize.html">05. Visualize MMs or AMCEs</a>
    <a class="dropdown-item" href="../articles/06-compare.html">06. Compare MMs or AMCEs between the subgroups</a>
    <a class="dropdown-item" href="../articles/07-explore.html">07. Explore further</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>02. Read and wrangle your data for conjoint analysis</h1>
            
      
      
      <div class="d-none name"><code>02-wrangle.Rmd</code></div>
    </div>

    
    
<p>Most of the work in analyzing a conjoint task is correctly specifying
the data and columns. In <code>projoint</code>, the
<code>reshape_projoint</code> function makes it easy!</p>
<div class="section level3">
<h3 id="load-the-projoint-package">2.1 Load the projoint package<a class="anchor" aria-label="anchor" href="#load-the-projoint-package"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yhoriuchi.github.io/projoint/">projoint</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="read-and-wrangle-data">2.2 Read and wrangle data<a class="anchor" aria-label="anchor" href="#read-and-wrangle-data"></a>
</h3>
<div class="section level4">
<h4 id="with-the-flipped-repeated-tasks">With the flipped repeated tasks<a class="anchor" aria-label="anchor" href="#with-the-flipped-repeated-tasks"></a>
</h4>
<p>Let’s look at a simple example. We expand all those arguments below
for clarity:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomes1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">outcomes1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outcomes1</span>, <span class="st">"choice1_repeated_flipped"</span><span class="op">)</span></span>
<span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData1</span>, </span>
<span>                         .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                         .outcomes <span class="op">=</span> <span class="va">outcomes1</span>,</span>
<span>                         .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                         .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>                         .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         .flipped <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                         .fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Let’s walk through the arguments we have specified.
<code>.dataframe</code> is a data frame, ideally read in from Qualtrics
using <code><a href="../reference/read_Qualtrics.html">read_Qualtrics()</a></code> but not necessarily. The
<code>.idvar</code> argument, a character, indicates that in
<code>exampleData1</code>, the column <code>ResponseId</code> indicates
unique survey respondents. The <code>.outcomes</code> variable lists all
the columns that are outcomes; the last element in this vector is the
repeated task (if it was conducted). <code>.outcomes_ids</code>
indicates the possible options for an outcome; specifically, it is a
vector of characters with two elements, which are the last characters of
the names of the first and second profiles. For example, it should be
c(“A”, “B”) if the profile names are “Candidate A” and “Candidate B”.
This character vector can be anything, such as c(“1”, “2”), c(“a”, “b”),
etc. <em>If you have multiple tasks in your design, you should use the
same profile names across all these tasks</em>. <code>.alphabet</code>
defaults to “K” if the conjoint survey was conducted using either our
tool or Strezhnev’s <a href="https://github.com/astrezhnev/conjointsdt" class="external-link">Conjoint Survey Design
Tool</a>. The final two arguments, <code>.repeated</code> and
<code>.flipped</code>, again relate to the repeated task. If the
<code>.repeated</code> is set to <code>TRUE</code>, then the last
element of the <code>.outcomes</code> vector is taken to be a repetition
of the first task; <code>.flipped</code> indicates whether the profiles
are in the reversed order.</p>
</div>
<div class="section level4">
<h4 id="with-the-not-flipped-repeated-tasks">With the not-flipped repeated tasks<a class="anchor" aria-label="anchor" href="#with-the-not-flipped-repeated-tasks"></a>
</h4>
<p>As a slight variation, in some cases the repeated task is
<em>not</em> flipped – that is, in the repeated task, the original
Profile 1 is still Profile 1, rather than flipping positions to Profile
2. Here we specify that by changing <code>.flipped</code> to
<code>FALSE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomes2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">outcomes2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outcomes2</span>, <span class="st">"choice1_repeated_notflipped"</span><span class="op">)</span></span>
<span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData2</span>, </span>
<span>                         .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                         .outcomes <span class="op">=</span> <span class="va">outcomes2</span>,</span>
<span>                         .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                         .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>                         .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         .flipped <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         .fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="without-the-repeated-tasks">Without the repeated tasks<a class="anchor" aria-label="anchor" href="#without-the-repeated-tasks"></a>
</h4>
<p>Or in cases with no repeated task at all, we set
<code>.repeated</code> to <code>FALSE</code> and <code>.flipped</code>
to <code>NULL</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outcomes3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">out3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData3</span>, </span>
<span>                         .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                         .outcomes <span class="op">=</span> <span class="va">outcomes3</span>,</span>
<span>                         .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                         .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>                         .repeated <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         .flipped <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                         .fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="the--fill-argument">2.3 The <code>.fill</code> argument<a class="anchor" aria-label="anchor" href="#the--fill-argument"></a>
</h3>
<p>The <code>.fill</code> argument is logical: TRUE if you want to use
information about whether a respondent chose the same profile for the
repeated task and “fill” (using the ‘tidyr’ package) missing values for
the non-repeated tasks, FALSE (otherwise).</p>
<p>You can see the difference by comparing the following two:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fill_FALSE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData1</span>, </span>
<span>                               .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                               .outcomes <span class="op">=</span> <span class="va">outcomes1</span>,</span>
<span>                               .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                               .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>                               .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                               .flipped <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                               .fill <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">fill_TRUE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData1</span>, </span>
<span>                              .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                              .outcomes <span class="op">=</span> <span class="va">outcomes1</span>,</span>
<span>                              .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                              .alphabet <span class="op">=</span> <span class="st">"K"</span>, </span>
<span>                              .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              .flipped <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              .fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>We just select the essential variables only. The first data frame
includes the values for the <code>agree</code> variable (whether the
same profile was chosen or not) only for the repeated task. The second
data frame fills the missing values for the other non-repeated
tasks.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">selected_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"task"</span>, <span class="st">"profile"</span>, <span class="st">"selected"</span>, <span class="st">"selected_repeated"</span>, <span class="st">"agree"</span><span class="op">)</span></span>
<span><span class="va">fill_FALSE</span><span class="op">@</span><span class="va">data</span><span class="op">[</span><span class="va">selected_vars</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6,400 × 6</span></span></span>
<span><span class="co">##    id                 task profile selected selected_repeated agree</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> R_00zYHdY1te1Qlrz     1       1        1                 1     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> R_00zYHdY1te1Qlrz     1       2        0                 0     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> R_00zYHdY1te1Qlrz     2       1        1                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> R_00zYHdY1te1Qlrz     2       2        0                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> R_00zYHdY1te1Qlrz     3       1        1                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> R_00zYHdY1te1Qlrz     3       2        0                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> R_00zYHdY1te1Qlrz     4       1        0                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> R_00zYHdY1te1Qlrz     4       2        1                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> R_00zYHdY1te1Qlrz     5       1        1                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> R_00zYHdY1te1Qlrz     5       2        0                <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6,390 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fill_TRUE</span><span class="op">@</span><span class="va">data</span><span class="op">[</span><span class="va">selected_vars</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6,400 × 6</span></span></span>
<span><span class="co">##    id                 task profile selected selected_repeated agree</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> R_00zYHdY1te1Qlrz     1       1        1                 1     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> R_00zYHdY1te1Qlrz     1       2        0                 0     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> R_00zYHdY1te1Qlrz     2       1        1                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> R_00zYHdY1te1Qlrz     2       2        0                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> R_00zYHdY1te1Qlrz     3       1        1                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> R_00zYHdY1te1Qlrz     3       2        0                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> R_00zYHdY1te1Qlrz     4       1        0                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> R_00zYHdY1te1Qlrz     4       2        1                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> R_00zYHdY1te1Qlrz     5       1        1                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> R_00zYHdY1te1Qlrz     5       2        0                <span style="color: #BB0000;">NA</span>     1</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6,390 more rows</span></span></span></code></pre>
<p>If the number of respondents is small, if the number of specific
profile pairs of your interest is small, and/or if the number of
specific respondent subgroups you want to study is small, it is worth
changing this option to TRUE. But please note that
<code>.fill = TRUE</code> is based on an assumption that IRR is
independent of information contained in conjoint tables. Although our
empirical tests suggest the validity of this assumption, if you are
unsure about it, it is better to use the default value (FALSE).</p>
</div>
<div class="section level3">
<h3 id="read-your-already-wrangled-tibble">2.4 Read your already-wrangled tibble<a class="anchor" aria-label="anchor" href="#read-your-already-wrangled-tibble"></a>
</h3>
<p>You may have already read the original data downloaded from
Qualtrics, load it to R, and wrangle data to make a data frame (or
tibble) ready of analysis. In such a case, you you use
<code><a href="../reference/make_projoint_data.html">make_projoint_data()</a></code> to save your data as a “projoint_data”
class object necessary to use <code><a href="../reference/projoint.html">projoint()</a></code>. Here is an
example. First, load your data frame.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">exampleData1_labelled_tibble</span></span></code></pre></div>
<p>It should looks like the following. Each row should correspond to
each of two profiles in each task for each respondent. The data frame
should have columns indicating (1) each respondent’s ID, (2) task
number, (3) profile number, and (4) a column recording each response (0,
1) for each task. If your design includes the repeated task, it should
also include a column recording the response for the repeated task.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 6,400 × 14</span></span></span>
<span><span class="co">##    id                 task profile selected selected_repeated `School Quality`</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> R_00zYHdY1te1Qlrz     1       1        1                 1 9 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> R_00zYHdY1te1Qlrz     1       2        0                 0 5 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> R_00zYHdY1te1Qlrz     2       1        1                <span style="color: #BB0000;">NA</span> 9 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> R_00zYHdY1te1Qlrz     2       2        0                <span style="color: #BB0000;">NA</span> 9 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> R_00zYHdY1te1Qlrz     3       1        1                <span style="color: #BB0000;">NA</span> 5 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> R_00zYHdY1te1Qlrz     3       2        0                <span style="color: #BB0000;">NA</span> 9 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> R_00zYHdY1te1Qlrz     4       1        0                <span style="color: #BB0000;">NA</span> 5 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> R_00zYHdY1te1Qlrz     4       2        1                <span style="color: #BB0000;">NA</span> 9 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> R_00zYHdY1te1Qlrz     5       1        1                <span style="color: #BB0000;">NA</span> 5 out of 10     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> R_00zYHdY1te1Qlrz     5       2        0                <span style="color: #BB0000;">NA</span> 5 out of 10     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6,390 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 8 more variables: `Violent Crime Rate (Vs National Rate)` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Racial Composition` &lt;chr&gt;, `Housing Cost` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Presidential Vote (2020)` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Total Daily Driving Time for Commuting and Errands` &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Type of Place` &lt;chr&gt;, race &lt;fct&gt;, ideology &lt;fct&gt;</span></span></span></code></pre>
<p>Next, make a character vector of your attributes.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">attributes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"School Quality"</span>,</span>
<span>                <span class="st">"Violent Crime Rate (Vs National Rate)"</span>,</span>
<span>                <span class="st">"Racial Composition"</span>,</span>
<span>                <span class="st">"Housing Cost"</span>,</span>
<span>                <span class="st">"Presidential Vote (2020)"</span>,</span>
<span>                <span class="st">"Total Daily Driving Time for Commuting and Errands"</span>,</span>
<span>                <span class="st">"Type of Place"</span><span class="op">)</span></span></code></pre></div>
<p>Then, make a suitable object for the next steps using
<code><a href="../reference/make_projoint_data.html">make_projoint_data()</a></code>. The default variable names are shown
below. If your data frame uses different names, you can change them.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_projoint_data.html">make_projoint_data</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">data</span>,</span>
<span>                           .attribute_vars <span class="op">=</span> <span class="va">attributes</span>, </span>
<span>                           .id_var <span class="op">=</span> <span class="st">"id"</span>, <span class="co"># the default name</span></span>
<span>                           .task_var <span class="op">=</span> <span class="st">"task"</span>, <span class="co"># the default name</span></span>
<span>                           .profile_var <span class="op">=</span> <span class="st">"profile"</span>, <span class="co"># the default name</span></span>
<span>                           .selected_var <span class="op">=</span> <span class="st">"selected"</span>, <span class="co"># the default name</span></span>
<span>                           .selected_repeated_var <span class="op">=</span> <span class="st">"selected_repeated"</span>, <span class="co"># the default is NULL</span></span>
<span>                           .fill <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The output will be the same as the output of <code>fill_FALSE</code>
in the previous section.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out4</span></span></code></pre></div>
<pre><code><span><span class="co">## An object of class "projoint_data"</span></span>
<span><span class="co">## Slot "labels":</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 24 × 4</span></span></span>
<span><span class="co">##    attribute_id level                        level_id  attribute               </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> att1         15% of pre-tax income        att1:lev1 Housing Cost            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> att1         30% of pre-tax income        att1:lev2 Housing Cost            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> att1         40% of pre-tax income        att1:lev3 Housing Cost            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> att2         30% Democrat, 70% Republican att2:lev1 Presidential Vote (2020)</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> att2         50% Democrat, 50% Republican att2:lev2 Presidential Vote (2020)</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> att2         70% Democrat, 30% Republican att2:lev3 Presidential Vote (2020)</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> att3         50% White, 50% Nonwhite      att3:lev1 Racial Composition      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> att3         75% White, 25% Nonwhite      att3:lev2 Racial Composition      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> att3         90% White, 10% Nonwhite      att3:lev3 Racial Composition      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> att3         96% White, 4% Nonwhite       att3:lev4 Racial Composition      </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 14 more rows</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Slot "data":</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 6,400 × 13</span></span></span>
<span><span class="co">##    id      task profile selected selected_repeated agree att4  att7  att3  att1 </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> R_00z…     1       1        1                 1     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> R_00z…     1       2        0                 0     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> R_00z…     2       1        1                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> R_00z…     2       2        0                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> R_00z…     3       1        1                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> R_00z…     3       2        0                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> R_00z…     4       1        0                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> R_00z…     4       2        1                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> R_00z…     5       1        1                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> R_00z…     5       2        0                <span style="color: #BB0000;">NA</span>     1 att4… att7… att3… att1…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6,390 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: att2 &lt;chr&gt;, att5 &lt;chr&gt;, att6 &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="arrange-the-order-and-labels-of-attributes-and-levels">2.5 Arrange the order and labels of attributes and levels<a class="anchor" aria-label="anchor" href="#arrange-the-order-and-labels-of-attributes-and-levels"></a>
</h3>
<p>The reshaped data have attributes and levels that are sorted
alphabetically. Often, however, you want to reorder the attributes
and/or order the levels of a particular attribute. You may also prefer
not to use the actual labels for attributes and levels used in your
conjoint experiments; for example, for the purpose of presentation, you
may want to make them shorter. This process has been challenging for
applied scholars using other packages. We make this process easy. You
first save the labels using <code><a href="../reference/save_labels.html">save_labels()</a></code>. In the CSV file
you save in your local computer, you should revise the column named
<code>order</code> to specify the order of attributes and levels you
want to display in your figure. You can also revise the labels for
attributes and levels in any way you like. But <em>you should not make
any change to the first column named <code>level_id</code></em>. After
saving the updated CSV file, you should use <code><a href="../reference/read_labels.html">read_labels()</a></code>
to read it and save the object suitable for the next step (i.e., use
<code><a href="../reference/projoint.html">projoint()</a></code>).</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/save_labels.html">save_labels</a></span><span class="op">(</span><span class="va">out1</span>, <span class="st">"temp/labels_original.csv"</span><span class="op">)</span></span>
<span><span class="va">out1_arranged</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_labels.html">read_labels</a></span><span class="op">(</span><span class="va">out1</span>, <span class="st">"temp/labels_arranged.csv"</span><span class="op">)</span></span></code></pre></div>
<p>You can find this data set on GitHub: <a href="https://github.com/yhoriuchi/projoint/blob/master/data-raw/labels_original.csv" class="external-link">labels_original.csv</a>
and <a href="https://github.com/yhoriuchi/projoint/blob/master/data-raw/labels_arranged.csv" class="external-link">labels_arranged.csv</a>.</p>
<p>The figure based on the original order and labels is in the
alphabetical order:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span><span class="va">out1</span>, .estimand <span class="op">=</span> <span class="st">"mm"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mm</span>, .estimand <span class="op">=</span> <span class="st">"mm"</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-wrangle_files/figure-html/unnamed-chunk-14-1.png" width="768"></p>
<p>The labels and order of all attribute-levels in the second figure is
the same as Figure 2 in <a href="https://doi.org/10.1086/687569" class="external-link">Mummolo
and Nall (2017)</a>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span><span class="va">out1_arranged</span>, .estimand <span class="op">=</span> <span class="st">"mm"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mm</span>, .estimand <span class="op">=</span> <span class="st">"mm"</span><span class="op">)</span></span></code></pre></div>
<p><img src="02-wrangle_files/figure-html/unnamed-chunk-15-1.png" width="768"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Yusaku Horiuchi, Aaron Kaufman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
