<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="How to estimate and correct marginal means (MMs) or average marginal component effects (AMCEs)
">
<title>4. Estimate corrected MMs or AMCEs • projoint</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="4. Estimate corrected MMs or AMCEs">
<meta property="og:description" content="How to estimate and correct marginal means (MMs) or average marginal component effects (AMCEs)
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">projoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/projoint.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>4. Estimate corrected MMs or AMCEs</h1>
            
      
      
      <div class="d-none name"><code>04-estimate.Rmd</code></div>
    </div>

    
    
<p>Due to IRR-induced measurement error, default MMs and AMCEs in
conjoint analysis are biased. By default, <code>projoint</code> produces
bias-corrected estimates automatically.</p>
<div class="section level3">
<h3 id="load-the-projoint-package-and-set-up-the-data">4.1 Load the projoint package and set up the data<a class="anchor" aria-label="anchor" href="#load-the-projoint-package-and-set-up-the-data"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yhoriuchi.github.io/projoint/">projoint</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outcomes</span>, <span class="st">"choice1_repeated_flipped"</span><span class="op">)</span></span>
<span><span class="va">out1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/reshape_projoint.html">reshape_projoint</a></span><span class="op">(</span>.dataframe <span class="op">=</span> <span class="va">exampleData1</span>, </span>
<span>                         .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>, </span>
<span>                         .outcomes <span class="op">=</span> <span class="va">outcomes</span>,</span>
<span>                         .outcomes_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>                         .alphabet <span class="op">=</span> <span class="st">"K"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="estimate-mms">4.2 Estimate MMs<a class="anchor" aria-label="anchor" href="#estimate-mms"></a>
</h3>
<p>There are two main setups for which <code>projoint</code> can produce
estimates. The profile-level is the most common approach in the
literature, while the choice-level is more flexible and powerful.</p>
<div class="section level4">
<h4 id="mm-profile-level-all-levels">MM (profile-level) – all levels<a class="anchor" aria-label="anchor" href="#mm-profile-level-all-levels"></a>
</h4>
<p>The default method in <code>projoint</code> is to estimate marginal
means (MMs) at the profile-level. If you run
<code>projoint(out1)</code>, it will conduct this analysis. We expand
all those arguments below for clarity:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                .qoi <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .by_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .structure <span class="op">=</span> <span class="st">"profile_level"</span>,</span>
<span>                .estimand <span class="op">=</span> <span class="st">"mm"</span>,</span>
<span>                .se_method <span class="op">=</span> <span class="st">"analytical"</span>,</span>
<span>                .irr <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                .remove_ties <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                .ignore_position <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .n_sims <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .n_boot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .weights_1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .clusters_1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .se_type_1 <span class="op">=</span> <span class="st">"classical"</span>,</span>
<span>                .weights_2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .clusters_2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                .se_type_2 <span class="op">=</span> <span class="st">"classical"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mm0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mm0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 48 × 6</span></span></span>
<span><span class="co">##    estimand       estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> mm_uncorrected    0.574  0.013<span style="text-decoration: underline;">4</span>    0.548     0.601 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> mm_uncorrected    0.485  0.013<span style="text-decoration: underline;">4</span>    0.458     0.511 att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> mm_uncorrected    0.445  0.013<span style="text-decoration: underline;">1</span>    0.419     0.470 att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> mm_uncorrected    0.489  0.013<span style="text-decoration: underline;">3</span>    0.463     0.515 att2:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att2:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> mm_uncorrected    0.524  0.013<span style="text-decoration: underline;">0</span>    0.498     0.549 att2:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att2:level2     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="mm-profile-level-specific-level">MM (profile-level) – specific level<a class="anchor" aria-label="anchor" href="#mm-profile-level-specific-level"></a>
</h4>
<p>However, it is also possible to specify the precise attributes, and
attribute levels, of interest using the <code>set_qoi</code> function as
below. The <code>set_qoi</code> function is the main way for users to
specify more complex estimands in conjoint analysis. Al arguments for
<code>qoi()</code> are expanded for clarity, but the default arguments
in <code><a href="../reference/projoint.html">projoint()</a></code> are dropped for simplicity:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qoi_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_qoi.html">set_qoi</a></span><span class="op">(</span></span>
<span>  .structure <span class="op">=</span> <span class="st">"profile_level"</span>,</span>
<span>  .estimand <span class="op">=</span> <span class="st">"mm"</span>,</span>
<span>  .att_choose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_choose <span class="op">=</span> <span class="st">"level1"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                .qoi <span class="op">=</span> <span class="va">qoi_1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mm1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mm1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 7</span></span></span>
<span><span class="co">##   estimand       estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> mm_uncorrected    0.574  0.013<span style="text-decoration: underline;">4</span>    0.548     0.601 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att1:level1     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: att_level_notchoose &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="mm-profile-level-specific-level-using-the-predicted-irr">MM (profile-level) – specific level, using the predicted IRR<a class="anchor" aria-label="anchor" href="#mm-profile-level-specific-level-using-the-predicted-irr"></a>
</h4>
<p>If your conjoint survey design does not include the recommended
repeated task, you can use the specific value for <code>.irr</code>,
which you can estimate using the <code><a href="../reference/predict_tau.html">predict_tau()</a></code> function or
specify the value based on prior knowledge. In the following, we use
0.75, which is most likely IRR we find in our test data sets. The
default arguments for both <code><a href="../reference/set_qoi.html">set_qoi()</a></code> and
<code><a href="../reference/projoint.html">projoint()</a></code> are dropped hereafter.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                 .qoi <span class="op">=</span> <span class="va">qoi_1</span>,</span>
<span>                 .irr <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mm1b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Assumed (0.75) </span></span>
<span><span class="co">##  Tau: 0.1464466 </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mm1b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 7</span></span></span>
<span><span class="co">##   estimand       estimate     se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> mm_uncorrected    0.574 0.013<span style="text-decoration: underline;">4</span>    0.548     0.601 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> mm_corrected      0.605 0.019<span style="text-decoration: underline;">0</span>    0.568     0.643 att1:level1     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: att_level_notchoose &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="mm-choice-level-specific-level">MM (choice-level) – specific level<a class="anchor" aria-label="anchor" href="#mm-choice-level-specific-level"></a>
</h4>
<p>As soon as users wish to switch from profile-level to choice-level
analysis, the <code>set_qoi</code> function is required. There are
exponentially more choice-level estimands than there are profile-level
estimands, so it is impractical to view all of them. Here we specify
that we want to return the marginal mean of attribute 1, levels 1 and 3
at the choice-level.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qoi_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_qoi.html">set_qoi</a></span><span class="op">(</span></span>
<span>  .structure <span class="op">=</span> <span class="st">"choice_level"</span>,</span>
<span>  .att_choose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_choose <span class="op">=</span> <span class="st">"level3"</span>,</span>
<span>  .att_notchoose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_notchoose <span class="op">=</span> <span class="st">"level1"</span></span>
<span><span class="op">)</span> </span>
<span></span>
<span><span class="va">mm2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                .qoi <span class="op">=</span> <span class="va">qoi_2</span>,</span>
<span>                .structure <span class="op">=</span> <span class="st">"choice_level"</span>,</span>
<span>                .ignore_position <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mm2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: choice_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mm2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 7</span></span></span>
<span><span class="co">##   estimand       estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> mm_uncorrected    0.402  0.025<span style="text-decoration: underline;">8</span>    0.352     0.453 att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> mm_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>     att1:level3     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: att_level_notchoose &lt;chr&gt;</span></span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="estimate-amces">4.3 Estimate AMCEs<a class="anchor" aria-label="anchor" href="#estimate-amces"></a>
</h3>
<p>Note that we can replicate all above analyses using the AMCE instead
of the MM just by specifying that the <code>.estimand = "amce"</code>
rather than the default <code>"mm"</code>.</p>
<div class="section level4">
<h4 id="amce-profile-level-all-levels">AMCE (profile-level) – all levels<a class="anchor" aria-label="anchor" href="#amce-profile-level-all-levels"></a>
</h4>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">amce0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                  .estimand <span class="op">=</span> <span class="st">"amce"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">amce0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: amce </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">amce0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 34 × 7</span></span></span>
<span><span class="co">##    estimand         estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> amce_uncorrected -<span style="color: #BB0000;">0.089</span><span style="color: #BB0000; text-decoration: underline;">9</span>   0.019<span style="text-decoration: underline;">0</span> -<span style="color: #BB0000;">0.127</span>     -<span style="color: #BB0000;">0.052</span><span style="color: #BB0000; text-decoration: underline;">7</span> att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> amce_corrected   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      att1:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> amce_uncorrected -<span style="color: #BB0000;">0.130</span>    0.018<span style="text-decoration: underline;">8</span> -<span style="color: #BB0000;">0.167</span>     -<span style="color: #BB0000;">0.093</span><span style="color: #BB0000; text-decoration: underline;">1</span> att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> amce_corrected   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> amce_uncorrected  0.034<span style="text-decoration: underline;">8</span>   0.018<span style="text-decoration: underline;">6</span> -<span style="color: #BB0000;">0.001</span><span style="color: #BB0000; text-decoration: underline;">70</span>    0.071<span style="text-decoration: underline;">3</span> att2:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> amce_corrected   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      att2:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> amce_uncorrected -<span style="color: #BB0000;">0.001</span><span style="color: #BB0000; text-decoration: underline;">77</span>  0.018<span style="text-decoration: underline;">8</span> -<span style="color: #BB0000;">0.038</span><span style="color: #BB0000; text-decoration: underline;">6</span>     0.035<span style="text-decoration: underline;">0</span> att2:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> amce_corrected   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      att2:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> amce_uncorrected  0.024<span style="text-decoration: underline;">0</span>   0.020<span style="text-decoration: underline;">4</span> -<span style="color: #BB0000;">0.015</span><span style="color: #BB0000; text-decoration: underline;">9</span>     0.064<span style="text-decoration: underline;">0</span> att3:level2     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> amce_corrected   <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>      att3:level2     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 24 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: att_level_choose_baseline &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="amce-profile-level-specific-level">AMCE (profile-level) – specific level<a class="anchor" aria-label="anchor" href="#amce-profile-level-specific-level"></a>
</h4>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qoi_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_qoi.html">set_qoi</a></span><span class="op">(</span></span>
<span>  .structure <span class="op">=</span> <span class="st">"profile_level"</span>,</span>
<span>  .estimand <span class="op">=</span> <span class="st">"amce"</span>,</span>
<span>  .att_choose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_choose <span class="op">=</span> <span class="st">"level3"</span>,</span>
<span>  .att_choose_b <span class="op">=</span> <span class="st">"att1"</span>,</span>
<span>  .lev_choose_b <span class="op">=</span> <span class="st">"level1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">amce1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                  .qoi <span class="op">=</span> <span class="va">qoi_3</span>,</span>
<span>                  .estimand <span class="op">=</span> <span class="st">"amce"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">amce1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: amce </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">amce1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">##   estimand         estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> amce_uncorrected   -<span style="color: #BB0000;">0.130</span>  0.018<span style="text-decoration: underline;">8</span>   -<span style="color: #BB0000;">0.167</span>   -<span style="color: #BB0000;">0.093</span><span style="color: #BB0000; text-decoration: underline;">1</span> att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> amce_corrected     <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>      att1:level3     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: att_level_notchoose &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   att_level_choose_baseline &lt;chr&gt;, att_level_notchoose_baseline &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="amce-profile-level-specific-level-using-the-predicted-irr">AMCE (profile-level) – specific level, using the predicted IRR<a class="anchor" aria-label="anchor" href="#amce-profile-level-specific-level-using-the-predicted-irr"></a>
</h4>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">amce1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                 .qoi <span class="op">=</span> <span class="va">qoi_3</span>,</span>
<span>                 .estimand <span class="op">=</span> <span class="st">"amce"</span>,</span>
<span>                 .irr <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">amce1b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: amce </span></span>
<span><span class="co">##  Structure: profile_level </span></span>
<span><span class="co">##  IRR: Assumed (0.75) </span></span>
<span><span class="co">##  Tau: 0.1464466 </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">amce1b</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">##   estimand         estimate     se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> amce_uncorrected   -<span style="color: #BB0000;">0.130</span> 0.018<span style="text-decoration: underline;">8</span>   -<span style="color: #BB0000;">0.167</span>   -<span style="color: #BB0000;">0.093</span><span style="color: #BB0000; text-decoration: underline;">1</span> att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> amce_corrected     -<span style="color: #BB0000;">0.184</span> 0.026<span style="text-decoration: underline;">6</span>   -<span style="color: #BB0000;">0.236</span>   -<span style="color: #BB0000;">0.132</span>  att1:level3     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: att_level_notchoose &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   att_level_choose_baseline &lt;chr&gt;, att_level_notchoose_baseline &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level4">
<h4 id="amce-choice-level-specific-level">AMCE (choice-level) – specific level<a class="anchor" aria-label="anchor" href="#amce-choice-level-specific-level"></a>
</h4>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qoi_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_qoi.html">set_qoi</a></span><span class="op">(</span></span>
<span>  .structure <span class="op">=</span> <span class="st">"choice_level"</span>,</span>
<span>  .estimand <span class="op">=</span> <span class="st">"amce"</span>,</span>
<span>  .att_choose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_choose <span class="op">=</span> <span class="st">"level3"</span>,</span>
<span>  .att_notchoose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_notchoose <span class="op">=</span> <span class="st">"level1"</span>,</span>
<span>  .att_choose_b <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_choose_b <span class="op">=</span> <span class="st">"level2"</span>,</span>
<span>  .att_notchoose_b <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>  .lev_notchoose_b <span class="op">=</span> <span class="st">"level1"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">amce2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1</span>,</span>
<span>                  .qoi <span class="op">=</span> <span class="va">qoi_4</span>,</span>
<span>                  .structure <span class="op">=</span> <span class="st">"choice_level"</span>,</span>
<span>                  .estimand <span class="op">=</span> <span class="st">"amce"</span>, </span>
<span>                  .ignore_position <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 1 coefficient  not defined because the design matrix is rank deficient</span></span></code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">amce2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: amce </span></span>
<span><span class="co">##  Structure: choice_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: NA </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">amce2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 9</span></span></span>
<span><span class="co">##   estimand         estimate      se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> amce_uncorrected  -<span style="color: #BB0000;">0.048</span><span style="color: #BB0000; text-decoration: underline;">4</span>  0.027<span style="text-decoration: underline;">0</span>   -<span style="color: #BB0000;">0.101</span>   0.004<span style="text-decoration: underline;">48</span> att1:level3     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> amce_corrected    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       att1:level3     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: att_level_notchoose &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   att_level_choose_baseline &lt;chr&gt;, att_level_notchoose_baseline &lt;chr&gt;</span></span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Yusaku Horiuchi, Aaron Kaufman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
